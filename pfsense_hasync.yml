---

- hosts: pfsense

  vars:
    sync_interface: opt2
    password: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              30633262363738373333666631353766666132623632376632623633306164356136376433643836
              3433386435643236396438333636643331326539346361630a666131393431303432373366366231
              35313539616365613761636263376565313861623861383563616438376161383636623630663361
              3138653232623938330a346637623539646466626438313761306462396435643230633637656163
              6135

              # This value is generated by:
              #   ansible-vault encrypt_string --stdin-name 'password'
              # in the devops-ansible directory. To change the password, run the above command and
              # enter the new password to re-encrypt with your passfile.

  tasks:
   - name: pfSense High Availability Sync
     pfsense_config:
       hasync:
         pfsyncenabled: "on"
         synchronizeusers: "on"
         synchronizeauthservers: "on"
         synchronizecerts: "on"
         synchronizerules: "on"
         synchronizeschedules: "on"
         synchronizealiases: "on"
         synchronizenat: "on"
         synchronizelb: "on"
         synchronizevirtualip: "on"
         synchronizetrafficshaper: "on"
         synchronizetrafficshaperlimiter: "on"
         synchronizednsforwarder: "on"
         pfsyncpeerip: "{{ sync_ip }}"
         pfsyncinterface: "{{ sync_interface }}"
         synchronizetoip: "{{ sync_ip }}"
         username: admin
         password: "{{ password }}"
